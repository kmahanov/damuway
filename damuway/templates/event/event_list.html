{% extends "base.html" %}
{% load static %}

{% block title %}–°–æ–±—ã—Ç–∏—è –¥–ª—è –¥–µ—Ç–µ–π{% endblock %}

{% block content %}
<link rel="stylesheet" href="{% static 'css/event_list.css' %}">

<section class="event-section">
    <div class="container">
        <h1 class="main-title">üéâ –ù–∞–π–¥–∏ —Å–≤–æ—ë –¥–µ—Ç—Å–∫–æ–µ –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏–µ</h1>

        <form method="GET" class="filters">
            <div class="filters-group">
                <label for="category">–ö–∞—Ç–µ–≥–æ—Ä–∏—è:</label>
                <select name="category" id="category" onchange="this.form.submit()">
                    <option value="">–í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</option>
                    {% for key, name in categories %}
                    <option value="{{ key }}" {% if request.GET.category == key %}selected{% endif %}>{{ name }}</option>
                    {% endfor %}
                </select>

                <input type="text" name="search" placeholder="üîç –ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é..." value="{{ request.GET.search }}">
                <button type="submit" class="btn-search">–ü–æ–∏—Å–∫</button>
            </div>
        </form>

        <div class="event-grid">
            {% for event in events %}
            <div class="card">
                {% if event.image %}
                <div class="card-image" style="background-image: url('{{ event.image.url }}');"></div>
                {% else %}
                <div class="card-image placeholder"></div>
                {% endif %}

                <div class="card-content">
                    <h2 class="card-title">{{ event.title }}</h2>
                    <p class="card-meta">üìç {{ event.location }} | üóì {{ event.date|date:"d M Y H:i" }}</p>
                    <p class="card-age">üë∂ –í–æ–∑—Ä–∞—Å—Ç: {{ event.age_limit }}</p>
                    <p class="card-price">üí∞ {{ event.price }}</p>
                    <a href="{% url 'event_detail' event.id %}" class="card-btn">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</a>
                </div>
            </div>
            {% empty %}
            <p class="no-events">üòî –ü–æ–∫–∞ –Ω–µ—Ç –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π.</p>
            {% endfor %}
        </div>
    </div>
</section>
{% endblock %}
