{% extends "base.html" %}
{% load static %}

{% block title %}–°–æ–±—ã—Ç–∏—è –¥–ª—è –¥–µ—Ç–µ–π | Damuway{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/event/event.css' %}">
{% endblock %}

{% block content %}
<div class="event-list-container">
  <h1>üéâ –î–µ—Ç—Å–∫–∏–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è</h1>

  <!-- –§–∏–ª—å—Ç—Ä -->
  <form method="GET" class="filter-form">
    <div class="form-row">
      <label for="category">–ö–∞—Ç–µ–≥–æ—Ä–∏—è</label>
      <select name="category" id="category" class="filter-select" onchange="this.form.submit()">
        <option value="">–í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</option>
        {% for key, name in categories %}
        <option value="{{ key }}" {% if request.GET.category == key %}selected{% endif %}>{{ name }}</option>
        {% endfor %}
      </select>
    </div>
    <div class="form-row">
      <label for="search">–ü–æ–∏—Å–∫</label>
      <input type="text" name="search" id="search" class="filter-input" placeholder="üîç –ù–∞–∑–≤–∞–Ω–∏–µ..." value="{{ request.GET.search }}">
    </div>
    <button type="submit" class="filter-btn">–ü–æ–∏—Å–∫</button>
  </form>

  <!-- –°–ø–∏—Å–æ–∫ —Å–æ–±—ã—Ç–∏–π -->
  <div class="event-grid">
    {% for event in events %}
    <a href="{% url 'event_detail' event.id %}" class="event-card">
      {% if event.image %}
      <img src="{{ event.image.url }}" alt="{{ event.title }}">
      {% else %}
      <div class="event-placeholder">–ù–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è</div>
      {% endif %}
      <div class="event-info">
        <h2>{{ event.title }}</h2>
        <p class="meta">üìç {{ event.location }} | üóì {{ event.date|date:"d M Y H:i" }}</p>
        <p class="age">üë∂ {{ event.age_limit }}</p>
        <p class="price">üí∞ {{ event.price }}</p>
      </div>
    </a>
    {% empty %}
    <p class="no-events">üòî –ü–æ–∫–∞ –Ω–µ—Ç –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π.</p>
    {% endfor %}
  </div>
</div>
{% endblock %}
