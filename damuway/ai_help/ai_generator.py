from transformers import pipeline

PREDEFINED_ANSWERS = {
    "–∏–≥—Ä—É—à–∫–∏ 3 –º–µ—Å—è—Ü–∞": "–î–ª—è —Ä–µ–±—ë–Ω–∫–∞ –≤ 3 –º–µ—Å—è—Ü–∞ –ø–æ–¥–æ–π–¥—É—Ç –º—è–≥–∫–∏–µ –ø–æ–≥—Ä–µ–º—É—à–∫–∏, —Ä–∞–∑–≤–∏–≤–∞—é—â–∏–µ –∫–æ–≤—Ä–∏–∫–∏, –º–æ–±–∏–ª–∏ –Ω–∞ –∫—Ä–æ–≤–∞—Ç–∫—É, –∏–≥—Ä—É—à–∫–∏ —Å —Ä–∞–∑–Ω—ã–º–∏ —Ç–µ–∫—Å—Ç—É—Ä–∞–º–∏ –∏ –∑–≤—É–∫–∞–º–∏.",
    "–ø–∏—Ç–∞–Ω–∏–µ 6 –º–µ—Å—è—Ü–µ–≤": "–í 6 –º–µ—Å—è—Ü–µ–≤ –º–æ–∂–Ω–æ –≤–≤–æ–¥–∏—Ç—å –ø—Ä–∏–∫–æ—Ä–º: –æ–≤–æ—â–Ω—ã–µ –ø—é—Ä–µ, –∫–∞—à–∏ –±–µ–∑ –≥–ª—é—Ç–µ–Ω–∞, –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ —Ñ—Ä—É–∫—Ç—ã.",
    "—Å–æ–Ω 1 –≥–æ–¥": "–í —ç—Ç–æ–º –≤–æ–∑—Ä–∞—Å—Ç–µ —Ä–µ–±—ë–Ω–∫—É –Ω—É–∂–Ω–æ –æ–∫–æ–ª–æ 11‚Äì12 —á–∞—Å–æ–≤ –Ω–æ—á–Ω–æ–≥–æ —Å–Ω–∞ –∏ 1‚Äì2 –¥–Ω–µ–≤–Ω—ã—Ö —Å–Ω–∞ –ø–æ 1‚Äì2 —á–∞—Å–∞.",
    "—Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ —É —Ä–µ–±–µ–Ω–∫–∞": "–ï—Å–ª–∏ —É —Ä–µ–±—ë–Ω–∫–∞ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –≤—ã—à–µ 38¬∞C –∏ –æ–Ω –≤—è–ª—ã–π ‚Äî –æ–±—Ä–∞—Ç–∏—Å—å –∫ –ø–µ–¥–∏–∞—Ç—Ä—É. –°–ª–µ–¥–∏ –∑–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º, –¥–∞–≤–∞–π –≤–æ–¥—É.",
    "–∫–∞–∫ –ø—Ä–∏—É—á–∏—Ç—å –∫ –≥–æ—Ä—à–∫—É": "–ù–µ —Ç–æ—Ä–æ–ø–∏—Ç–µ—Å—å. –ù–∞—á–∏–Ω–∞–π—Ç–µ, –∫–æ–≥–¥–∞ —Ä–µ–±—ë–Ω–æ–∫ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∏–Ω—Ç–µ—Ä–µ—Å. –î–µ–ª–∞–π—Ç–µ –ø—Ä–æ—Ü–µ—Å—Å –∏–≥—Ä–æ–≤—ã–º –∏ —Ö–≤–∞–ª–∏—Ç–µ –∑–∞ —É—Å–ø–µ—Ö–∏.",
}


print("üîÅ –ó–∞–≥—Ä—É–∂–∞—é AI –º–æ–¥–µ–ª—å...")
generator = pipeline("text-generation", model="ai-forever/rugpt3small_based_on_gpt2")

def generate_answer(question):
    question_lower = question.lower()
    for keyword, predefined in PREDEFINED_ANSWERS.items():
        if all(word in question_lower for word in keyword.split()):
            return predefined


    prompt = f"–¢—ã ‚Äî –∑–∞–±–æ—Ç–ª–∏–≤—ã–π –ø–æ–º–æ—â–Ω–∏–∫ —Ä–æ–¥–∏—Ç–µ–ª—è–º. –û—Ç–≤–µ—á–∞–π —á—ë—Ç–∫–æ –∏ –ø–æ –¥–µ–ª—É. –í–æ–ø—Ä–æ—Å: {question} –û—Ç–≤–µ—Ç:"
    result = generator(
        prompt,
        max_length=60,
        do_sample=True,
        top_k=50,
        top_p=0.95,
        temperature=0.8,
        repetition_penalty=1.2,
    )[0]['generated_text']
    return result.split("–û—Ç–≤–µ—Ç:")[-1].strip()